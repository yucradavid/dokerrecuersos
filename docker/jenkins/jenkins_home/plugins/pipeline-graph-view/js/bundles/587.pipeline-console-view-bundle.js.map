{"version":3,"file":"587.pipeline-console-view-bundle.js","mappings":"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","sources":["webpack://pipeline-graph-view-plugin/./src/main/frontend/pipeline-console-view/pipeline-console/main/data-tree-view.scss?2e34","webpack://pipeline-graph-view-plugin/./src/main/frontend/pipeline-console-view/pipeline-console/main/DataTreeView.tsx","webpack://pipeline-graph-view-plugin/./src/main/frontend/pipeline-console-view/pipeline-console/main/data-tree-view.scss"],"sourcesContent":["\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/sass-loader/dist/cjs.js!./data-tree-view.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/sass-loader/dist/cjs.js!./data-tree-view.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback, useState } from \"react\";\nimport {\n  Result,\n  StageInfo,\n} from \"../../../pipeline-graph-view/pipeline-graph/main/\";\nimport \"./data-tree-view.scss\";\nimport { total } from \"../../../common/utils/timings\";\nimport StatusIcon from \"../../../common/components/status-icon\";\n\nexport default function DataTreeView({\n  stages,\n  selected,\n  onNodeSelect,\n}: DataTreeViewProps) {\n  const handleSelect = useCallback(\n    (event: React.MouseEvent, nodeId: string) => {\n      onNodeSelect(event, nodeId);\n    },\n    [onNodeSelect],\n  );\n\n  return (\n    <div id=\"tasks\">\n      {stages.map((stage) => (\n        <TreeNode\n          key={stage.id}\n          stage={stage}\n          selected={selected}\n          onSelect={handleSelect}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction TreeNode({ stage, selected, onSelect }: TreeNodeProps) {\n  const hasChildren = stage.children && stage.children.length > 0;\n  const isSelected = String(stage.id) === selected;\n  const [isExpanded, setIsExpanded] = useState<boolean>(\n    hasSelectedDescendant(stage),\n  );\n\n  function hasSelectedDescendant(stage: StageInfo): boolean {\n    return stage.children?.some(\n      (child) => String(child.id) === selected || hasSelectedDescendant(child),\n    );\n  }\n\n  const handleToggleClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsExpanded(!isExpanded);\n  };\n\n  return (\n    <div className=\"task\">\n      <div className=\"pgv-tree-node-header\">\n        <a\n          href={`?selected-node=` + stage.id}\n          onClick={(e) => {\n            // Only prevent left clicks\n            if (e.button !== 0 || e.metaKey || e.ctrlKey) {\n              return;\n            }\n\n            e.preventDefault();\n\n            history.replaceState({}, \"\", `?selected-node=` + stage.id);\n            if (!isSelected) {\n              onSelect(e, String(stage.id));\n            }\n            setIsExpanded(!isExpanded);\n          }}\n          className={`pgv-tree-item task-link ${\n            isSelected ? \"task-link--active\" : \"\"\n          }`}\n        >\n          <div>\n            <span className=\"task-icon-link\">\n              <StatusIcon\n                status={stage.state}\n                percentage={stage.completePercent}\n                skeleton={stage.skeleton}\n              />\n            </span>\n            <span className=\"task-link-text\">{stage.name}</span>\n            {stage.state === Result.running && (\n              <span className=\"pgv-tree-item__description\">\n                {total(stage.totalDurationMillis)}\n              </span>\n            )}\n          </div>\n        </a>\n\n        {hasChildren && (\n          <button\n            className={`pgv-toggle-icon ${\n              isExpanded ? \"pgv-toggle-icon--active\" : \"\"\n            }`}\n            onClick={handleToggleClick}\n            aria-label={isExpanded ? \"Collapse\" : \"Expand\"}\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n              <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"48\"\n                d=\"M184 112l144 144-144 144\"\n              />\n            </svg>\n          </button>\n        )}\n      </div>\n\n      {hasChildren && isExpanded && (\n        <div className=\"pgv-tree-children\">\n          {stage.children.map((child) => (\n            <TreeNode\n              key={child.id}\n              stage={child}\n              selected={selected}\n              onSelect={onSelect}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface DataTreeViewProps {\n  stages: StageInfo[];\n  selected: string;\n  onNodeSelect: (event: React.MouseEvent, nodeId: string) => void;\n}\n\ninterface TreeNodeProps {\n  stage: StageInfo;\n  selected: string;\n  onSelect: (event: React.MouseEvent, id: string) => void;\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `#tasks{margin:0;padding-right:1.4rem}.pgv-tree-item{display:block !important;font-family:var(--font-family-sans) !important;padding-block:.3125rem !important;padding-right:1rem;cursor:pointer !important}.pgv-tree-item>div{display:flex;align-items:center;justify-content:stretch;text-wrap:nowrap;text-overflow:ellipsis;white-space:nowrap;gap:.65rem;mask-image:linear-gradient(90deg, white calc(100% - 2.5rem), transparent calc(100% - 1rem))}.pgv-tree-item .task-icon-link>div{display:contents}.pgv-tree-item svg{flex-shrink:0}.pgv-tree-item__description{color:var(--text-color-secondary)}.pgv-toggle-icon{position:absolute;top:.5rem;right:.5rem;width:1rem;height:1rem;margin-left:auto;transition:var(--standard-transition);appearance:none;background:none;padding:0;border:none;cursor:pointer;color:var(--text-color-secondary)}.pgv-toggle-icon--active{rotate:90deg}.pgv-toggle-icon svg{width:1rem;height:1rem}.pgv-toggle-icon svg *{stroke-width:42px !important}.pgv-toggle-icon:hover{color:var(--text-color)}.pgv-tree-node-header{position:relative}.pgv-tree-children{position:relative;display:flex;flex-direction:column;gap:.125rem;margin-top:.125rem;padding-left:calc(2.725rem + var(--jenkins-border-width, 2px));padding-right:.7rem}.pgv-tree-children::before{content:\"\";position:absolute;top:.375rem;left:calc(1.3875rem - var(--jenkins-border-width, 2px)/2);bottom:.375rem;background-color:var(--jenkins-border-color, color-mix(in srgb, var(--text-color-secondary) 25%, transparent));width:var(--jenkins-border-width, 2px);border-radius:10px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/main/frontend/pipeline-console-view/pipeline-console/main/data-tree-view.scss\"],\"names\":[],\"mappings\":\"AAAA,OACE,QAAA,CACA,oBAAA,CAGF,eACE,wBAAA,CACA,8CAAA,CACA,iCAAA,CACA,kBAAA,CACA,yBAAA,CAEA,mBACE,YAAA,CACA,kBAAA,CACA,uBAAA,CACA,gBAAA,CACA,sBAAA,CACA,kBAAA,CACA,UAAA,CACA,2FAAA,CAOF,mCACE,gBAAA,CAGF,mBACE,aAAA,CAGF,4BACE,iCAAA,CAIJ,iBACE,iBAAA,CACA,SAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,qCAAA,CACA,eAAA,CACA,eAAA,CACA,SAAA,CACA,WAAA,CACA,cAAA,CACA,iCAAA,CAEA,yBACE,YAAA,CAGF,qBACE,UAAA,CACA,WAAA,CAEA,uBACE,4BAAA,CAIJ,uBACE,uBAAA,CAIJ,sBACE,iBAAA,CAGF,mBACE,iBAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,kBAAA,CAEA,8DAAA,CACA,mBAAA,CAEA,2BACE,UAAA,CACA,iBAAA,CACA,WAAA,CAEA,yDAAA,CAGA,cAAA,CAEA,8GAAA,CAKA,sCAAA,CACA,kBAAA\",\"sourcesContent\":[\"#tasks {\\n  margin: 0;\\n  padding-right: 1.4rem;\\n}\\n\\n.pgv-tree-item {\\n  display: block !important;\\n  font-family: var(--font-family-sans) !important;\\n  padding-block: 0.3125rem !important;\\n  padding-right: 1rem;\\n  cursor: pointer !important;\\n\\n  & > div {\\n    display: flex;\\n    align-items: center;\\n    justify-content: stretch;\\n    text-wrap: nowrap;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n    gap: 0.65rem;\\n    mask-image: linear-gradient(\\n      90deg,\\n      white calc(100% - 2.5rem),\\n      transparent calc(100% - 1rem)\\n    );\\n  }\\n\\n  .task-icon-link > div {\\n    display: contents;\\n  }\\n\\n  svg {\\n    flex-shrink: 0;\\n  }\\n\\n  &__description {\\n    color: var(--text-color-secondary);\\n  }\\n}\\n\\n.pgv-toggle-icon {\\n  position: absolute;\\n  top: 0.5rem;\\n  right: 0.5rem;\\n  width: 1rem;\\n  height: 1rem;\\n  margin-left: auto;\\n  transition: var(--standard-transition);\\n  appearance: none;\\n  background: none;\\n  padding: 0;\\n  border: none;\\n  cursor: pointer;\\n  color: var(--text-color-secondary);\\n\\n  &--active {\\n    rotate: 90deg;\\n  }\\n\\n  svg {\\n    width: 1rem;\\n    height: 1rem;\\n\\n    * {\\n      stroke-width: 42px !important;\\n    }\\n  }\\n\\n  &:hover {\\n    color: var(--text-color);\\n  }\\n}\\n\\n.pgv-tree-node-header {\\n  position: relative;\\n}\\n\\n.pgv-tree-children {\\n  position: relative;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 0.125rem;\\n  margin-top: 0.125rem;\\n  // TODO - var fallback can removed after baseline is moved >= 2.496\\n  padding-left: calc(1.35rem + 1.375rem + var(--jenkins-border-width, 2px));\\n  padding-right: 0.7rem;\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: 0.375rem;\\n    // TODO - var fallback can removed after baseline is moved >= 2.496\\n    left: calc(\\n      0.7rem + (1.375rem / 2) - (var(--jenkins-border-width, 2px) / 2)\\n    );\\n    bottom: 0.375rem;\\n    // TODO - var fallback can removed after baseline is moved >= 2.496\\n    background-color: var(\\n      --jenkins-border-color,\\n      color-mix(in srgb, var(--text-color-secondary) 25%, transparent)\\n    );\\n    // TODO - var fallback can removed after baseline is moved >= 2.496\\n    width: var(--jenkins-border-width, 2px);\\n    border-radius: 10px;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","DataTreeView","_ref","stages","selected","onNodeSelect","handleSelect","useCallback","event","nodeId","React","id","map","stage","TreeNode","key","onSelect","_ref2","hasChildren","children","length","isSelected","String","_useState","useState","hasSelectedDescendant","_stage$children","some","child","_useState2","isExpanded","setIsExpanded","className","href","onClick","e","button","metaKey","ctrlKey","preventDefault","history","replaceState","concat","StatusIcon","status","state","percentage","completePercent","skeleton","name","Result","running","total","totalDurationMillis","stopPropagation","xmlns","viewBox","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","___CSS_LOADER_EXPORT___","push","module"],"sourceRoot":""}